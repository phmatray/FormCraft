@page "/dialog-demo"
@inject IDialogService DialogService

<PageTitle>Dialog Integration Demo</PageTitle>

<DemoPageLayout
    DemoId="dialog-demo"
    Title="Dialog Integration"
    Icon="@Icons.Material.Filled.OpenInNew"
    Description="Use FormCraft forms inside MudBlazor dialogs for consistent form experiences in modal contexts. Create, edit, and interact with forms in dialog windows."
    FormDemoIcon="@Icons.Material.Filled.Window">
    <FormDemoContent>
        <MudGrid>
            <!-- Simple Dialog Example -->
            <MudItem xs="12" md="6">
                <MudPaper Class="pa-4">
                    <MudText Typo="Typo.h6" GutterBottom="true">
                        <MudIcon Icon="@Icons.Material.Filled.AddBox" Class="mr-2" />
                        Simple Form Dialog
                    </MudText>
                    <MudText Typo="Typo.body2" Class="mb-3">
                        Demonstrates a basic form in a dialog for creating new records.
                    </MudText>
                    <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="OpenSimpleDialog">
                        Open Contact Form
                    </MudButton>

                    @if (!string.IsNullOrEmpty(_simpleDialogResult))
                    {
                        <MudAlert Severity="Severity.Success" Class="mt-4">
                            @_simpleDialogResult
                        </MudAlert>
                    }
                </MudPaper>
            </MudItem>

            <!-- Edit Dialog Example -->
            <MudItem xs="12" md="6">
                <MudPaper Class="pa-4">
                    <MudText Typo="Typo.h6" GutterBottom="true">
                        <MudIcon Icon="@Icons.Material.Filled.Edit" Class="mr-2" />
                        Edit Form Dialog
                    </MudText>
                    <MudText Typo="Typo.body2" Class="mb-3">
                        Shows how to pre-populate a form with existing data for editing.
                    </MudText>
                    <MudButton Variant="Variant.Filled" Color="Color.Secondary" OnClick="OpenEditDialog">
                        Edit Product
                    </MudButton>

                    @if (!string.IsNullOrEmpty(_editDialogResult))
                    {
                        <MudAlert Severity="Severity.Info" Class="mt-4">
                            @_editDialogResult
                        </MudAlert>
                    }
                </MudPaper>
            </MudItem>
        </MudGrid>

        <!-- Additional Content Cards -->
        <MudGrid Class="mt-4">
            <MudItem xs="12">
                <WhenToUseCard Text="@DialogDemo.Documentation.WhenToUse" />
            </MudItem>
            <MudItem xs="12">
                <CommonPitfallsCard Pitfalls="@DialogDemo.Documentation.CommonPitfalls" />
            </MudItem>
            <MudItem xs="12">
                <RelatedDemosCard DemoIds="@DialogDemo.Documentation.RelatedDemoIds" />
            </MudItem>
        </MudGrid>
    </FormDemoContent>
    
    <CodeExampleContent>
        @foreach (var example in DialogDemo.Documentation.CodeExamples)
        {
            <CodeExample
                Title="@example.Title"
                Language="@example.Language"
                Code="@example.CodeProvider()" />
        }
    </CodeExampleContent>
    
    <GuidelinesContent>
        <MudGrid>
            <MudItem xs="12">
                <FormGuidelines Guidelines="@_guidelines" Title="Dialog Integration Best Practices" />
            </MudItem>
            <MudItem xs="12" Class="mt-4">
                <ApiGuidelinesTable
                    Title="Dialog API Reference"
                    Items="@DialogDemo.Documentation.ApiGuidelines.Select(g => new GuidelineItem { Feature = g.Feature, Usage = g.Usage, Example = g.Example }).ToList()" />
            </MudItem>
        </MudGrid>
    </GuidelinesContent>
</DemoPageLayout>