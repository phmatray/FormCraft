@inherits LayoutComponentBase
@inject IVersionService VersionService
@inject NavigationManager Navigation

<MudThemeProvider Theme="_theme" IsDarkMode="@_isDarkMode" />
<MudPopoverProvider />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
    <MudAppBar Elevation="1" Dense="false">
        <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@ToggleDrawer" />
        <MudLink Class="d-flex align-center" Style="text-decoration: none; color: inherit; cursor: pointer;" @onclick="NavigateToHome">
            <MudIcon Icon="@Icons.Material.Filled.DynamicForm" Class="ml-3 me-2" Size="Size.Large" Style="color: white;" />
            <MudText Typo="Typo.h5" Class="font-weight-bold" Style="color: white;">
                FormCraft
            </MudText>
        </MudLink>
        <MudChip T="string" Text="@($"v{_version}")" Size="Size.Small" Color="Color.Primary" Class="ml-2 mt-1" />
        <MudSpacer />
        
        <MudTooltip Text="Toggle light/dark mode">
            <MudIconButton
                Icon="@(_isDarkMode ? Icons.Material.Filled.LightMode : Icons.Material.Filled.DarkMode)" 
                Color="Color.Inherit" 
                OnClick="@ToggleTheme" />
        </MudTooltip>
        
        <MudDivider Vertical="true" FlexItem="true" Class="mx-2 my-2" />
        
        <MudButton
            Variant="Variant.Text" 
            Color="Color.Inherit" 
            StartIcon="@Icons.Material.Filled.MenuBook"
            Href="docs/getting-started">
            Docs
        </MudButton>
        
        <MudButton
            Variant="Variant.Text" 
            Color="Color.Inherit" 
            StartIcon="@Icons.Custom.Brands.GitHub" 
            Href="https://github.com/phmatray/FormCraft" 
            Target="_blank">
            GitHub
        </MudButton>
        
        <MudButton
            Variant="Variant.Filled" 
            Color="Color.Primary" 
            StartIcon="@Icons.Material.Filled.GetApp"
            Href="https://www.nuget.org/packages/FormCraft"
            Target="_blank"
            Class="ml-2">
            Get Started
        </MudButton>
    </MudAppBar>
    
    <MudDrawer @bind-Open="@_drawerOpen" ClipMode="DrawerClipMode.Always" Elevation="2" Breakpoint="Breakpoint.Md" Variant="DrawerVariant.Responsive">
        <MudNavMenu>
            <MudNavLink Href="home" Icon="@Icons.Material.Filled.Home">
                Welcome
            </MudNavLink>
            
            <MudNavGroup Title="Form Examples" Icon="@Icons.Material.Filled.Dashboard" Expanded="true">
                <MudNavLink Href="simplified" Icon="@Icons.Material.Filled.AutoFixHigh">
                    Simplified API
                </MudNavLink>
                <MudNavLink Href="improved" Icon="@Icons.Material.Filled.Engineering">
                    Type-Safe Builder
                </MudNavLink>
                <MudNavLink Href="fluent" Icon="@Icons.Material.Filled.FlashOn">
                    Fluent API
                </MudNavLink>
                <MudNavLink Href="attribute-based-forms" Icon="@Icons.Material.Filled.Label">
                    Attribute-Based Forms
                </MudNavLink>
                <MudNavLink Href="field-groups" Icon="@Icons.Material.Filled.GridView">
                    Field Groups
                </MudNavLink>
                <MudNavLink Href="custom-renderers" Icon="@Icons.Material.Filled.Palette">
                    Custom Renderers
                </MudNavLink>
                <MudNavLink Href="password-demo" Icon="@Icons.Material.Filled.Lock">
                    Password Fields
                </MudNavLink>
                <MudNavLink Href="file-upload" Icon="@Icons.Material.Filled.CloudUpload">
                    File Upload
                </MudNavLink>
                <MudNavLink Href="form-slots" Icon="@Icons.Material.Filled.ViewCarousel">
                    Form Slots
                </MudNavLink>
                <MudNavLink Href="stepper-form" Icon="@Icons.Material.Filled.LinearScale">
                    Stepper Form
                </MudNavLink>
                <MudNavLink Href="tabbed-form" Icon="@Icons.Material.Filled.Tab">
                    Tabbed Form
                </MudNavLink>
                <MudNavLink Href="security-demo" Icon="@Icons.Material.Filled.Security">
                    Security Features
                </MudNavLink>
                <MudNavLink Href="fluent-validation-demo" Icon="@Icons.Material.Filled.CheckCircle">
                    FluentValidation Demo
                </MudNavLink>
                <MudNavLink Href="dialog-demo" Icon="@Icons.Material.Filled.OpenInNew">
                    Dialog Integration
                </MudNavLink>
                <MudNavLink Href="cross-field-validation" Icon="@Icons.Material.Filled.CompareArrows">
                    Cross-Field Validation
                </MudNavLink>
                <MudNavLink Href="complex-dependencies" Icon="@Icons.Material.Filled.AccountTree">
                    Complex Dependencies
                </MudNavLink>
                <MudNavLink Href="async-value-provider" Icon="@Icons.Material.Filled.CloudSync">
                    Async Value Providers
                </MudNavLink>
            </MudNavGroup>
            
            <MudNavGroup Title="Documentation" Icon="@Icons.Material.Filled.MenuBook" Expanded="true">
                <MudNavLink Href="docs/getting-started" Icon="@Icons.Material.Filled.PlayArrow">
                    Getting Started
                </MudNavLink>
                <MudNavLink Href="docs/api-reference" Icon="@Icons.Material.Filled.Code">
                    API Reference
                </MudNavLink>
                <MudNavLink Href="docs/examples" Icon="@Icons.Material.Filled.AutoAwesome">
                    Examples
                </MudNavLink>
                <MudNavLink Href="docs/customization" Icon="@Icons.Material.Filled.Palette">
                    Customization
                </MudNavLink>
                <MudNavLink Href="docs/fluent-validation" Icon="@Icons.Material.Filled.CheckCircle">
                    FluentValidation
                </MudNavLink>
                <MudNavLink Href="docs/security" Icon="@Icons.Material.Filled.Security">
                    Security
                </MudNavLink>
                <MudNavLink Href="docs/troubleshooting" Icon="@Icons.Material.Filled.BugReport">
                    Troubleshooting
                </MudNavLink>
            </MudNavGroup>
        </MudNavMenu>
    </MudDrawer>
    
    <MudMainContent>
        <MudContainer MaxWidth="MaxWidth.ExtraLarge" Class="my-4">
            @Body
        </MudContainer>
        
        <MudContainer MaxWidth="MaxWidth.ExtraLarge" Class="mt-8 mb-4">
            <MudDivider />
            <div class="d-flex justify-center align-center py-4">
                <MudText Typo="Typo.body2" Align="Align.Center" Class="text-muted">
                    Made with <MudIcon Icon="@Icons.Material.Filled.Favorite" Size="Size.Small" Color="Color.Error" Style="vertical-align: middle;" /> for Blazor
                </MudText>
            </div>
        </MudContainer>
    </MudMainContent>

    <MudScrollToTop>
        <MudFab Color="Color.Primary" StartIcon="@Icons.Material.Filled.KeyboardArrowUp" />
    </MudScrollToTop>
</MudLayout>

<div id="blazor-error-ui" data-nosnippet>
    An unhandled error has occurred.
    <a href="." class="reload">Reload</a>
    <span class="dismiss">ðŸ—™</span>
</div>

<style>
    .text-muted {
        opacity: 0.7;
    }
</style>